<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>TATA MOTORS LUCKNOW</title>

  <!-- App-like colors -->
  <meta name="theme-color" content="#004b8d" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#0b1b2d" media="(prefers-color-scheme: dark)">

  <!-- PWA Manifest (optional but recommended) -->
  <link rel="manifest" href="manifest.webmanifest">

  <style>
    :root{
      --brand:#004b8d;       /* TATA blue */
      --accent:#00a0df;
      --bg:#f5f7fb;
      --card:#ffffff;
      --text:#1f2a44;
      --muted:#5a6b84;
      --border:#e7ecf6;
      --shadow: 0 10px 26px rgba(31,42,68,.08);
    }
    /* Dark theme tokens */
    :root.dark{
      --bg:#0b1b2d;
      --card:#101f36;
      --text:#e8eef9;
      --muted:#9fb2d0;
      --border:#1b3356;
      --shadow: 0 10px 26px rgba(0,0,0,.45);
    }

    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .app{
      min-height:100dvh;
      display:grid;
      grid-template-rows:auto 1fr auto;
    }

    /* Header */
    .header{
      background:linear-gradient(135deg, var(--brand), #013763);
      color:#fff;
      padding:12px 14px;
      position:sticky;
      top:0;
      z-index:20;
      box-shadow:0 6px 20px rgba(0,0,0,.18);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .title-wrap{
      min-width:0;
    }
    .title{
      margin:0;
      font-weight:800;
      letter-spacing:.4px;
      font-size:clamp(18px, 4.5vw, 28px);
      line-height:1.2;
    }
    .designer{
      margin-top:4px;
      display:inline-block;
      font-size:12px;
      opacity:.95;
      background: rgba(255,255,255,.12);
      padding:6px 10px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.25);
      backdrop-filter: blur(6px);
    }

    .actions{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .btn{
      appearance:none;
      border:1px solid #0f8fc9;
      background:var(--accent);
      color:#fff;
      padding:8px 10px;
      border-radius:10px;
      font-size:12px;
      line-height:1;
      cursor:pointer;
      box-shadow:0 3px 10px rgba(0,0,0,.12);
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .btn.outline{
      background:transparent;
      border:1px solid rgba(255,255,255,.55);
      color:#fff;
    }
    .btn[disabled]{ opacity:.55; cursor:not-allowed }

    /* Content */
    .content{
      padding:14px;
      display:grid;
      gap:14px;
    }
    .card{
      background:var(--card);
      border-radius:14px;
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 12px;
      border-bottom:1px solid #eef2f8;
    }
    :root.dark .card-header{ border-bottom-color:#173054; }
    .card-title{
      margin:0;
      font-size:15px;
      font-weight:700;
      color:var(--brand);
    }
    .linkbar{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .link{
      text-decoration:none;
      font-size:12px;
      color:#fff;
      background:var(--accent);
      padding:8px 12px;
      border-radius:8px;
      border:1px solid #0f8fc9;
      white-space:nowrap;
    }
    .link.secondary{
      background:transparent;
      color:var(--text);
      border:1px solid var(--border);
    }

    /* Smart frame area */
    .frame-wrap{
      position:relative;
      width:100%;
      background: color-mix(in oklab, var(--card) 90%, black);
      aspect-ratio: 16/9;
      min-height: 60vh;  /* good height on small phones */
      overflow:hidden;
    }
    /* Loading skeleton */
    .skeleton{
      position:absolute;
      inset:0;
      background: linear-gradient(90deg,
        rgba(255,255,255,0.06) 0%,
        rgba(255,255,255,0.14) 50%,
        rgba(255,255,255,0.06) 100%);
      animation: shimmer 1.6s infinite;
      z-index:1;
    }
    @keyframes shimmer{
      0% { transform: translateX(-40%); }
      100% { transform: translateX(40%); }
    }
    .frame{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      border:0;
      background:transparent;
    }

    .notice{
      display:none;
      position:absolute;
      inset:auto 12px 12px 12px;
      background: rgba(0,0,0,.7);
      color:#fff;
      padding:10px 12px;
      border-radius:10px;
      font-size:12px;
      z-index:2;
    }

    /* Footer */
    .footer{
      padding:12px 14px;
      font-size:18px;
      color:#fff;
      color:var(--muted);
      text-align:center;
    }

    /* Larger screens */
    @media (min-width: 768px){
      .content{ padding:18px; }
      .frame-wrap{ min-height: 70vh; }
    }
    @media (min-width: 1100px){
      .content{ max-width:1100px; margin:0 auto; }
      .frame-wrap{ aspect-ratio: 16/9; min-height: 72vh; }
    }

    /* Focus visibility for a11y */
    :focus-visible{
      outline: 3px solid #00c2ff;
      outline-offset: 3px;
      border-radius:8px;
    }

    /* iOS safe area */
    @supports (padding: max(0px)){
      .header{ padding-left:max(14px, env(safe-area-inset-left)); padding-right:max(14px, env(safe-area-inset-right)); }
      .content{ padding-left:max(14px, env(safe-area-inset-left)); padding-right:max(14px, env(safe-area-inset-right)); }
      .footer{ padding-left:max(14px, env(safe-area-inset-left)); padding-right:max(14px, env(safe-area-inset-right)); }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header" role="banner">
      <div class="title-wrap">
        <h1 class="title">TATA MOTORS LUCKNOW</h1>
        <span class="designer" aria-label="Designer credit">Designer: Govind Kumar</span>
      </div>

      <div class="actions" role="group" aria-label="Quick actions">
        <button id="themeBtn" class="btn outline" title="Toggle theme (D)">
          üåì Theme
    
        <button id="shareBtn" class="btn" title="Share (S)">
          üîó Share
        </button>
        <button id="fullscreenBtn" class="btn outline" title="Fullscreen (F)">
          ‚õ∂ Full
        </button>
      </div>
    </header>

    <!-- Main -->
    <main class="content" role="main">
      <section class="card" aria-labelledby="embedTitle">
        <div class="card-header">
          <h2 id="embedTitle" class="card-title">Embedded Google Drive Preview</h2>
          <div class="linkbar" role="group" aria-label="Links">
            <a class="link" target="_blank" rel="noopener"
               href="https://drive.google.com/file/d/1_lNwHBjgFdYIq71XTDjYf-x-funEaSr9/view"
               title="Open in Google Drive">Open in Drive</a>
            <a class="link secondary" target="_blank" rel="noopener"
               href="https://drive.google.com/uc?export=download&id=1_lNwHBjgFdYIq71XTDjYf-x-funEaSr9"
               title="Direct download">Download</a>
          </div>
        </div>

        <div class="frame-wrap" id="frameWrap">
          <div class="skeleton" aria-hidden="true"></div>
          <!-- Google Drive preview -->
          <iframe
            id="driveFrame"
            class="frame"
            title="Google Drive preview"
            src="https://drive.google.com/file/d/1_lNwHBjgFdYIq71XTDjYf-x-funEaSr9/preview"
            allow="autoplay; fullscreen"
            referrerpolicy="no-referrer-when-downgrade"
            loading="lazy">
          </iframe>
          <div id="notice" class="notice" role="status" aria-live="polite">
            Having trouble loading the preview? Tap ‚ÄúOpen in Drive‚Äù above. If the file is restricted,
            change sharing to ‚ÄúAnyone with the link can view.‚Äù
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer" >
      ¬© TATA Motors ‚Äì Lucknow | Own by TCF Maintenance Team | Embedded Drive Preview ‚Ä¢ Keyboard: D = Theme, F = Fullscreen, S = Share
    </footer>
  </div>

  <script>
    // ===== Theme (auto + toggle + persist) =====
    const root = document.documentElement;
    const THEME_KEY = 'tml_theme';
    const saved = localStorage.getItem(THEME_KEY);
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (saved === 'dark' || (!saved && prefersDark)) root.classList.add('dark');
    document.getElementById('themeBtn').addEventListener('click', () => {
      root.classList.toggle('dark');
      localStorage.setItem(THEME_KEY, root.classList.contains('dark') ? 'dark' : 'light');
    });

    // Update theme-color meta when toggling
    const lightMeta = document.querySelector('meta[name="theme-color"][media*="light"]');
    const darkMeta  = document.querySelector('meta[name="theme-color"][media*="dark"]');
    const applyThemeColor = () => {
      if (root.classList.contains('dark')) {
        if (darkMeta) darkMeta.setAttribute('content', '#0b1b2d');
      } else {
        if (lightMeta) lightMeta.setAttribute('content', '#004b8d');
      }
    };
    applyThemeColor();
    new MutationObserver(applyThemeColor).observe(root, { attributes:true, attributeFilter:['class'] });

    // ===== Loading skeleton + error hint =====
    const frame = document.getElementById('driveFrame');
    const skeleton = document.querySelector('.skeleton');
    const notice = document.getElementById('notice');

    const hideSkeleton = () => skeleton && (skeleton.style.display = 'none');
    frame.addEventListener('load', hideSkeleton);
    // If not loaded within 6s, show a hint
    setTimeout(() => {
      const loaded = skeleton && skeleton.style.display === 'none';
      if (!loaded) notice.style.display = 'block';
    }, 6000);

    // ===== Web Share API =====
    const shareBtn = document.getElementById('shareBtn');
    shareBtn.addEventListener('click', async () => {
      const url = 'https://drive.google.com/file/d/1_lNwHBjgFdYIq71XTDjYf-x-funEaSr9/view';
      try {
        if (navigator.share) {
          await navigator.share({
            title: 'TATA MOTORS LUCKNOW ‚Äì Drive File',
            text: 'Check this file:',
            url
          });
        } else {
          await navigator.clipboard.writeText(url);
          shareBtn.textContent = '‚úÖ Copied';
          setTimeout(() => (shareBtn.textContent = 'üîó Share'), 1200);
        }
      } catch(e){
        // fallback to copy
        try{
          await navigator.clipboard.writeText(url);
          shareBtn.textContent = '‚úÖ Copied';
          setTimeout(() => (shareBtn.textContent = 'üîó Share'), 1200);
        }catch(_){}
      }
    });

    // ===== Fullscreen toggle =====
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    const frameWrap = document.getElementById('frameWrap');
    const enterFS = async () => {
      if (frameWrap.requestFullscreen) return frameWrap.requestFullscreen();
      if (frameWrap.webkitRequestFullscreen) return frameWrap.webkitRequestFullscreen();
    };
    const exitFS = async () => {
      if (document.exitFullscreen) return document.exitFullscreen();
      if (document.webkitExitFullscreen) return document.webkitExitFullscreen();
    };
    fullscreenBtn.addEventListener('click', async () => {
      if (!document.fullscreenElement && !document.webkitFullscreenElement) {
        await enterFS();
      } else {
        await exitFS();
      }
    });
    document.addEventListener('fullscreenchange', () => {
      fullscreenBtn.textContent = document.fullscreenElement ? '‚§¢ Exit' : '‚õ∂ Full';
      if (document.fullscreenElement) frame.focus();
    });

    // ===== Keyboard shortcuts =====
    document.addEventListener('keydown', (e) => {
      if (e.repeat) return;
      if (['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) return;
      if (e.key.toLowerCase() === 'd'){ e.preventDefault(); document.getElementById('themeBtn').click(); }
      if (e.key.toLowerCase() === 'f'){ e.preventDefault(); fullscreenBtn.click(); }
      if (e.key.toLowerCase() === 's'){ e.preventDefault(); shareBtn.click(); }
    });

   
    // ===== Register service worker =====
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(console.warn);
      });
    }
  </script>
</body>
</html>